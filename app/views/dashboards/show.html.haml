#dashboard
  %h1.dashboard-title= @dashboard.title
  .column#area1
    .column-inner
    .add-new-widget
      = submit_tag "Add a new Widget...", :class => "full-width-button"
  .column#area2
    .column-inner
    .add-new-widget
      = submit_tag "Add a new Widget...", :class => "full-width-button"
  .column#area3
    .column-inner
    .add-new-widget
      = submit_tag "Add a new Widget...", :class => "full-width-button"
 
  %script{:type => "text/json"}
    != @dashboard_settings.to_json
  
  %script{:type => "text/javascript"}
    function firstLoad() {
    - @dashboard.widgets.order("area, area_position").each do |widget|
      != render :partial => "widgets/view.js.erb", :locals => {:widget => widget, :widget_data => widget.widget_data}
    }
  .widget-template
    .widget-box
      .widget-head
        .title
        .actions
          %ul
            %li.remove= link_to "Remove Widget", "#"
            %li.settings= link_to "Toggle Settings", "#"
      .widget-content
        .type-bar
        .hidden
          .mode.new-mode
            %h3
            = simple_form_for [@dashboard, Widget.new], :remote => true do |f|
              .input
                = f.label :widget_input_types, "Select your Widget:", :class => "required"
                = f.grouped_collection_select :widget_input_types, @available_inputs_widgets_slugs, :widgets, :label, :value, :label, :class => "required"
              = f.hidden_field :area
              = f.hidden_field :guid
              = f.button :submit
          .mode.edit-mode
        .mode.normal-mode
